<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8">

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="apple-mobile-web-app-title" content="react boilerplate">
    <link rel="apple-touch-icon" sizes="120x120" href="/icon-120x120.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="167x167" href="/icon-167x167.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/icon-180x180.png">

    <link rel="icon" href="/favicon.ico" />
    <title>Ebdo Abonnement</title>
  </head>
  <body>
    <!-- Display a message if JS has been disabled on the browser. -->
    <noscript>Si vous voyez ce message, cela signifie que <strong>JavaScript a été désactivé dans votre navigateur </strong>, <strong> activez JS </strong> pour que cette application fonctionne.</noscript>

    <div id="app"></div>

    <script src="https://js.stripe.com/v3/"></script>
    <script>
    !(function() {
  const analytics = (window.analytics = window.analytics || [])
  if (!analytics.initialize) {
    if (analytics.invoked) {
      window.console &&
        console.error &&
        console.error('Segment snippet included twice.')
    } else {
      analytics.invoked = !0
      analytics.methods = [
        'trackSubmit',
        'trackClick',
        'trackLink',
        'trackForm',
        'pageview',
        'identify',
        'reset',
        'group',
        'track',
        'ready',
        'alias',
        'debug',
        'page',
        'once',
        'off',
        'on'
      ]
      analytics.factory = function(t) {
        return function() {
          const e = Array.prototype.slice.call(arguments)
          e.unshift(t)
          analytics.push(e)
          return analytics
        }
      }
      for (let t = 0; t < analytics.methods.length; t++) {
        const e = analytics.methods[t]
        analytics[e] = analytics.factory(e)
      }
      analytics.load = function(t) {
        const e = document.createElement('script')
        e.type = 'text/javascript'
        e.async = !0
        e.src = `${
          document.location.protocol === 'https:' ? 'https://' : 'http://'
        }cdn.segment.com/analytics.js/v1/${t}/analytics.min.js`
        const n = document.getElementsByTagName('script')[0]
        n.parentNode.insertBefore(e, n)
      }
      analytics.SNIPPET_VERSION = '4.0.0'
      analytics.load('KxhrEIWHIx7EOgHlOQotAxy1fqgHP174')
    }
  }
})()
</script>

<!-- Crisp Client Code -->
<script type="text/javascript">window.$crisp=[];window.CRISP_WEBSITE_ID="cca66c87-4cf0-47a2-a994-c1bdc2f7368c";(function(){d=document;s=d.createElement("script");s.src="https://client.crisp.im/l.js";s.async=1;d.getElementsByTagName("head")[0].appendChild(s);})();</script>
<!-- End Crisp Client Code -->

<!-- Crisp Routing Code -->
<script>
var departments = ['full', 'cm']
var greetings = {
  full: 'Très bien, comment puis-je vous aider ? :)',
  cm: 'Très bien, comment puis-je vous aider ? :)'
}

if (!localStorage.getItem('crisp-routing')) {
  $crisp.push([
    'on',
    'chat:opened',
    function(data) {
      if (!localStorage.getItem('crisp-intro')) {
        $crisp.push([
          'do',
          'message:show',
          [
            'picker',
            {
              id: 'routing',
              text: 'Bonjour, vous souhaitez contacter...',
              choices: [
                {
                  value: 'full',
                  label: 'Le service abonnement',
                  selected: false
                },
                {
                  value: 'cm',
                  label: "L'équipe Ebdo",
                  selected: false
                }
              ]
            }
          ]
        ])
        localStorage.setItem('crisp-intro', 'true')
      }
    }
  ])
}

$crisp.push([
  'on',
  'message:received',
  function(data) {
    if (data.origin !== 'update') {
      return
    }
    if (!data.content.choices) {
      return
    }
    if (localStorage.getItem('crisp-routing')) {
      return
    }
    for (var index in data.content.choices) {
      var current = data.content.choices[index]
      if (current.selected && departments[current.value] !== -1) {
        $crisp.push(['set', 'session:segments', [[current.value]]])
        $crisp.push(['do', 'message:show', ['text', greetings[current.value]]])
        localStorage.setItem('crisp-routing', 'true')
        return
      }
    }
  }
])
</script>
<!-- End Crisp Routing Code -->

<script async src="https://www.googletagmanager.com/gtag/js?id=DC-8312645"></script>
<script>
window.dataLayer = window.dataLayer || []
function gtag() {
  dataLayer.push(arguments)
}
gtag('js', new Date())

gtag('config', 'DC-8312645')
</script>

  </body>
</html>
